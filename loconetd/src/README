$Id: README,v 1.7 2002/06/17 08:58:33 glenn Exp $

loconetd: UDP Multicaster of Loconet Packets
version 0.3
author: Glenn Butcher
date: 9 June 2002


DESCRIPTION

loconetd receives Loconet packets from a Locobuffer (probably  won't work 
with a MS100!) and UDP multicasts them to a Cat D group.  It also receives 
raw packets via UDP unicast and retransmits them on the Loconet.  Loconet 
is a proprietary network protocol for model railroad digital command and 
control (DCC) made by Digitrax, Inc. (http://www.digitrax.com).  loconetd 
is released under the terms of the GNU Public License Version 2; see COPYING.

lococlient is a quick 'n dirty multicast receiver for that group, prints the
packet contents as hex.  It uses SO_REUSEADDR, so multiple copies can be run
on a single host.

lococlient.pl is an equivalent client in Perl using IO::Socket::Multicast.

slotreader.pl demonstrates using both the UDP multicast and unicast to
retrieve Loconet slot information.

bcastclient.pl demonstrates simple UDP broadcast.  However, as delivered it
simply attaches to localhost.

I used Linux to develop this software, kernel 2.2.19, gcc 2.95.3, Perl 5.6.1.
I can almost guarantee that porting to other Unices will require
modification, check the signal handling for starters.

All programs contained in this package are licensed under the GPL version 2. 
A copy of the license can be found in the file COPYING.


USAGE

compile:

  $ make

add multicast route:

  # /sbin/route add -net 224.0.0.0 netmask 240.0.0.0 eth0 (or whatever i/f)

configure: 

  edit loconetd.conf, place either in the same directory as
  loconetd or in /etc.  File is well-commented.

run:

  $ ./loconetd


NOTES

To test the multicast functionality on a single machine with no network, use 
the loopback interface for the route command.

I had to disable echo (J2: 1-2) on my Locobuffer to make packet transmission 
work.

"make clean" removes C object files _and_ files generated by the
joe editor (DEADJOE, ending in ~).

The log file is wiped clean at the start of every execution of loconetd.  If
you want to retain a log file, copy it somewhere else immediately after
killing loconetd.

There is a DEBUG boolean in the code; setting it to TRUE will display
"goezintas" and "comesoutas" in non-daemon mode.


KNOWN PROBLEMS

loconetd will not write packets to Loconet when run as a daemon by a regular 
user. It locks up Locobuffer output; Locobuffer still receives and forwards
Loconet packets, but will not send one.  Only a Locobuffer reset will fix 
the situation.  Accordingly, I have "fixed" the sofware so it will not
daemonize unless running as root.


TODO

  1. Maybe a Java GUI client?
