<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1"><!--NewPage--><!-- Extract of javadoc -->


<title>Statusdaten Abfrage</title><meta name="date" content="2009-09-23">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript">
function windowTitle()
{
if (location.href.indexOf('is-external=true') == -1) {
parent.document.title="Statusdaten";
}
}
</script></head>
<body onload="windowTitle();" style="background-color: white;">
<hr>
<br>
<table style="width: 100%;" summary="" border="0" cellpadding="1" cellspacing="0">
<tbody>
<tr>
<td colspan="2" class="NavBarCell1" bgcolor="#eeeeff">
<table summary="" border="0" cellpadding="0" cellspacing="3">
<tbody>
<tr align="center" valign="top">
<td class="NavBarCell1" bgcolor="#eeeeff">
<a href="../../overview-summary.html"><font class="NavBarFont1"><b>Überblick</b></font></a>&nbsp;</td>
<td class="NavBarCell1" bgcolor="#eeeeff">
<a href="kapitel-summary.html"><font class="NavBarFont1"><b>Kapitel</b></font></a>&nbsp;</td>
<td class="NavBarCell1" bgcolor="#eeeeff">
<a href="../../help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr>
<td style="background-color: white; text-align: right; vertical-align: middle;" class="NavBarCell2"><font size="-2"> <a href="../../index.html" target="_top"><b>FRAMES</b></a>
&nbsp;
&nbsp;<a href="6_Statusdata.html" target="_top"><b>NO
FRAMES</b></a> &nbsp;
&nbsp;
<script type="text/javascript">
<!--
if(window==top) {
document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
}
//-->
</script>
<noscript> <A
HREF="../../allclasses-noframe.html"><B>All
Classes</B></A>
</noscript>
</font></td>
</tr>
</tbody>
</table>
<hr>
<h2>Statusdaten Konfiguration</h2>
<hr>
<table summary="" border="1" cellpadding="3" cellspacing="0" width="100%">
<tbody>
<tr class="TableHeadingColor" bgcolor="#ccccff">
<th colspan="2" align="left"><font size="+2">
<b>Kennung</b></font></th>
</tr>
<tr class="TableRowColor" bgcolor="white">
<td>
Statusdaten Konfiguration
(<i><font color="#0000ff">0x00</font></i>,
in CAN-ID:<i><font color="#ff0000">0x00</font></i>)&nbsp;
</td>
</tr>
</tbody>
</table>
<br>
<table summary="" border="1" cellpadding="3" cellspacing="0" width="100%">
<tbody>
<tr class="TableHeadingColor" bgcolor="#ccccff">
<th colspan="1" align="left"><font size="+2">
<b>Format</b></font></th>
</tr>
</tbody>
</table>
<br>
<table style="text-align: center; width: 653px;" class="CanTable" border="1" bordercolor="#000000" cellspacing="1">
<tbody>
<tr>
<td style="width: 7%;">
Prio
</td>
<td style="width: 9%;">
Command
</td>
<td style="width: 5%;">
Resp.
</td>
<td style="width: 6%;">
Hash
</td>
<td style="width: 6%;">
DLC
</td>
<td style="width: 8%;">
D-Byte 0
</td>
<td style="width: 8%;">
D-Byte 1
</td>
<td style="width: 8%;">
D-Byte 2
</td>
<td style="width: 8%;">
D-Byte 3
</td>
<td style="width: 8%;">
D-Byte 4
</td>
<td style="width: 8%;">
D-Byte 5
</td>
<td style="width: 8%;">
D-Byte 6
</td>
<td style="width: 8%;">
D-Byte 7
</td>
</tr>
<tr>
<td>
2+2 Bit
</td>
<td>
8 Bit
</td>
<td>
1 Bit
</td>
<td>
16 Bit
</td>
<td>
4 Bit
</td>
<td>
8 Bit
</td>
<td>
8 Bit
</td>
<td>
8 Bit
</td>
<td>
8 Bit
</td>
<td>
8 Bit
</td>
<td>
8 Bit
</td>
<td>
8 Bit
</td>
<td>
8 Bit
</td>
</tr>
<tr>
<td rowspan="2">
Message
Prio
</td>
<td rowspan="2">
<font color="#0000ff">System-befehl</font>
</td>
<td rowspan="2">
0|1
</td>
<td rowspan="2">
-</td>
<td rowspan="2">
5
</td>
<td colspan="4">
Ziel
Geräte-UID
</td>
<td rowspan="2">
<font color="#008080">Sub-CMD<br>
Stop</font>
</td>
<td rowspan="2" style="width: 8%; background-color: silver;">
&nbsp;</td>
<td rowspan="2" style="width: 8%; background-color: silver;">
&nbsp;</td>
<td rowspan="2" style="width: 8%; background-color: silver;">
&nbsp;</td>
</tr>
<tr>
<td>
High
</td>
<td>
-</td>
<td>
-</td>
<td>
Low
</td>
</tr>
<tr>
<td>
Prio
</td>
<td>
Command
</td>
<td>
Resp.
</td>
<td>
Hash
</td>
<td>
DLC
</td>
<td>
D-Byte 0
</td>
<td>
D-Byte 1
</td>
<td>
D-Byte 2
</td>
<td>
D-Byte 3
</td>
<td>
D-Byte 4
</td>
<td>
D-Byte 5
</td>
<td>
D-Byte 6
</td>
<td>
D-Byte 7
</td>
</tr>
</tbody>
</table>
<br>
<br>
<table summary="" border="1" cellpadding="3" cellspacing="0" width="100%">
<tbody>
<tr class="TableHeadingColor" bgcolor="#ccccff">
<th colspan="1" align="left"><font size="+2">
<b>Beschreibung</b></font></th>
</tr>
</tbody>
</table>
<p>Abfrage
der Konfigurationswerte der Beschreibung der Messwertdaten eines
Gerätes.</p>
<p>Messwertdaten
eines Gerätes sind in Indices gegliedert. Zu jedem Index gehört
eine Beschreibung. In der Antwort sind für jeden Index die im Gerät
gespeicherten Konfigurationsdaten enthalten. Index 0 ist die
Gerätebeschreibung und enthält unter anderem die Anzahl der zur
Verfügung gestellten Mess­werte. Jeder weitere Index liefert
eine Beschreibung, wie der entsprechende Messkanal dargestellt werden
kann. Die Indice für Messwerte beginnen bei 1 und dürfen hier keine
Lücken enthalten.</p>
<p>Die
Übertragung der Daten erfolgt als Datenstrom, im Hash befindet sich
die Paketnummer. </p>
<p>Der
Abschluss der Übertragung erfolgt durch Bestätigung der
ursprünglichen Datagramms und der Information der gesendeten Pakete.</p>
<p style="font-weight: bold;">Format
Gerätebeschreibung: </p>
<p style="margin-left: 20px;">Unter
Index 0 sind die Gerätebeschreibung abrufbar. Primär ist dies die
Anzahl der zur Verfügung gestellten Messkanäle. Weiterhin enthalten
sind Angaben zur Identifikation des Gerätes.</p>
<p style="margin-left: 20px;">Format
Gerätebeschreibung:</p>
<dl style="margin-left: 20px;">
<dd>
<table style="width: 338px;" border="1" bordercolor="#000000" cellpadding="4" cellspacing="0" width="302">
<col width="41"> <col width="243"> <tbody>
<tr valign="top">
<td style="width: 51px;">
Char </td>
<td style="width: 267px;">
Anzahl der
Messwerte im Gerät.
</td>
</tr>
<tr valign="top">
<td style="width: 51px;">
3 Byte </td>
<td style="width: 267px;">
frei.
</td>
</tr>
<tr valign="top">
<td style="width: 51px;">
U32 </td>
<td style="width: 267px;">
Seriennummer CS2.
</td>
</tr>
<tr valign="top">
<td style="width: 51px;">
String
</td>
<td style="width: 267px;">
8 Byte
Artikelnummer.
</td>
</tr>
<tr valign="top">
<td style="width: 51px;">
String </td>
<td style="width: 267px;">
Gerätebezeichnung,
\0 Terminiert
</td>
</tr>
<tr>
<td>String</td>
<td>Nickname, \0 Terminiert (Max 16 Byte)</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p style="margin-left: 20px;"> </p>
<p style="font-weight: bold;">Format
des Datenblocks:</p>
<p style="margin-left: 20px;">Die
darauf folgenden Indice enthalten eine zum Messwert gehörende
Beschreibung:</p>
<p style="margin-left: 20px;">Format
Messwertbeschreibung</p>
<dl style="margin-left: 20px;">
<dd>
<table style="width: 522px;" border="1" bordercolor="#000000" cellpadding="4" cellspacing="0" width="419">
<col width="41"> <col width="142"> <col width="210"> <tbody>
<tr valign="top">
<td style="width: 49px;">
Typ
</td>
<td style="width: 155px;">
Bedeutung
</td>
<td style="width: 288px;">
Beispiel
</td>
</tr>
<tr valign="top">
<td style="width: 49px;">
Char
</td>
<td style="width: 155px;">
Abfragekanalnummer
</td>
<td style="width: 288px;">
0x01: Abfrage
unter Kanal 1
</td>
</tr>
<tr valign="top">
<td style="width: 49px;">
Char
</td>
<td style="width: 155px;">
Potenz des
Messwerts
</td>
<td style="width: 288px;">
-3 Bedeutet: 10-3
</td>
</tr>
<tr valign="top">
<td style="width: 49px;">
Char
</td>
<td style="width: 155px;">
Farbe Bereich 1
</td>
<td style="width: 288px;">
0x00: Farbdarst.
Sw, SW-Darst: Sw
</td>
</tr>
<tr valign="top">
<td style="width: 49px;">
Char
</td>
<td style="width: 155px;">
Farbe Bereich 2
</td>
<td style="width: 288px;">
0x31: Farbdarst.
Grün, SW-Darst: Gr1
</td>
</tr>
<tr valign="top">
<td style="width: 49px;">
Char
</td>
<td style="width: 155px;">
Farbe Bereich 3
</td>
<td style="width: 288px;">
0xF2: Farbdarst.
Gelb, SW-Darst: Gr2
</td>
</tr>
<tr valign="top">
<td style="width: 49px;">
Char
</td>
<td style="width: 155px;">
Farbe Bereich 4
</td>
<td style="width: 288px;">
0xC3: Farbdarst.
Rot SW-Darst: Ws
</td>
</tr>
<tr valign="top">
<td style="width: 49px;">
U16
</td>
<td style="width: 155px;">
Nullpunkt
</td>
<td style="width: 288px;">
0
</td>
</tr>
<tr valign="top">
<td style="width: 49px;">
U16
</td>
<td style="width: 155px;">
Ende Bereich 1
</td>
<td style="width: 288px;">
1800
</td>
</tr>
<tr valign="top">
<td style="width: 49px;">
U16
</td>
<td style="width: 155px;">
Ende Bereich 2
</td>
<td style="width: 288px;">
2000
</td>
</tr>
<tr valign="top">
<td style="width: 49px;">
U16
</td>
<td style="width: 155px;">
Ende Bereich 3
</td>
<td style="width: 288px;">
2100
</td>
</tr>
<tr valign="top">
<td style="width: 49px;">
U16
</td>
<td style="width: 155px;">
Ende Bereich 4
</td>
<td style="width: 288px;">
2250
</td>
</tr>
<tr valign="top">
<td style="width: 49px;">
String
</td>
<td style="width: 155px;">
Messwertbezeichnung
</td>
<td style="width: 288px;">
Hauptgleisstrom\0
</td>
</tr>
<tr valign="top">
<td style="width: 49px;">
String
</td>
<td style="width: 155px;">
Bezeichnung Start
</td>
<td style="width: 288px;">
0.000\0
</td>
</tr>
<tr valign="top">
<td style="width: 49px;">
String
</td>
<td style="width: 155px;">
Bezeichnung Ende
</td>
<td style="width: 288px;">
2.500\0
</td>
</tr>
<tr valign="top">
<td style="width: 49px;">
String
</td>
<td style="width: 155px;">
Einheit
</td>
<td style="width: 288px;">
Achsen\0 oder A\0
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p style="font-weight: bold;">Abfragekanalnummer:</p>
<p style="margin-left: 20px;">Wert
bestimmt, unter welcher Kanalnummer mit dem Befehl "System
Status" der entsprechende Messwert abgerufen werden kann.
Messwerte sind als vorzeichenlose 16 Bit Messwerte normiert.</p>
<p style="margin-left: 20px;">Ebenso
wird bei einer Überlastmeldung diese Kanalnummer verwendet. </p>
<p style="font-weight: bold;">Potenz
des Messwerts:</p>
<p style="margin-left: 20px;">Bestimmt,
welche Potenz der zugehörige Messwert hat, also Messwert 1000
entspricht 1 bei Potenz -3</p>
<p><span style="font-weight: bold;">
Farben
der Bereiche eines Kanals:</span> </p>
<p style="margin-left: 20px;">Für
eine farbliche Darstellung eines Messkanals benötigt man
Bereichsgrenzen und die Informationen für die Farbdarstellung des
Bereichs.</p>
<p style="margin-left: 20px;">
Beispiel
Strommessung</p>
<p style="margin-left: 20px;">Grün
ist der normale Lastbereich, Gelb ist grenzwertig und bei Rot sollte
nicht zu lange Betrieb sein. Max entspricht hier dem Überlastbereich,
wenn dieser zu lange anhält wird abgeschaltet. </p>
<dl style="margin-left: 20px;">
<dd>
<table border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
<col> <col> <col> <col> <tbody>
<tr valign="top">
<td bgcolor="#ffffff">
Bereich 1
</td>
<td bgcolor="#ffffff">
Bereich 2
</td>
<td bgcolor="#ffffff">
Bereich 3
</td>
<td bgcolor="#ffffff">
Bereich 4
</td>
</tr>
<tr valign="top">
<td bgcolor="#00ff00">
<br>
</td>
<td bgcolor="#ffff00">
<br>
</td>
<td bgcolor="#ff0000">
<br>
</td>
<td bgcolor="#ff0000">
<br>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p style="margin-left: 20px;">Werte
aus Strings " Bezeichnung Start" und "Bezeichnung
Ende": Ende aus String <br>
0 2.500</p>
<p style="margin-left: 20px;">Mitgeteilte
Messwerte aus dem obigen Bereichsangaben: <br>
Nullpunkt Ende
Bereich 4 <br>
0 300 325 375 400</p>
<p style="margin-left: 20px;">Beispiel
Spannungsmessung</p>
<p style="margin-left: 20px;">Unterspannung
und Überspannung sind Rot. Gelb ist ein Bereich, in dem Betrieb
möglich aber nicht Empfehlenswert, Grün ist der normale
Betriebsbereich.</p>
<dl style="margin-left: 20px;">
<dd>
<table border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
<col><col> <tbody>
<tr valign="top">
<td bgcolor="#ffffff">
Bereich 1
</td>
<td bgcolor="#ffffff">
Bereich 2
</td>
<td bgcolor="#ffffff">
Bereich 3
</td>
<td bgcolor="#ffffff">
Bereich 4
</td>
</tr>
<tr valign="top">
<td bgcolor="#ff0000">
<br>
</td>
<td bgcolor="#ffff00">
<br>
</td>
<td bgcolor="#00ff00">
<br>
</td>
<td bgcolor="#ff0000">
<br>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p style="margin-left: 20px;">Die
Farbdarstellung wird als 8 Bitwert, im Format RGB und
Graudarstellung, repräsentiert. Dabei werden je 2 Bit für jede
Information verwendet.</p>
<p style="margin-left: 20px;">Die
Werte für Nullpunkt und Bereiche 1-4 bestimmen den Messwert ab
welchem diese Farbe gültig ist.</p>
<p style="margin-left: 20px;">Nullpunkt
bestimmt, ab welchem Messwert der Wert angezeigt werden soll. </p>
<p><span style="font-weight: bold;">Messwertbezeichnung:</span>
</p>
<p style="margin-left: 20px;">Liefert
eine Bezeichnung zum Messwert. </p>
<p style="font-weight: bold;">Internationalisierung:</p>
<p style="margin-left: 20px;">Messwerte
müssen in der Graphical User Interface Prozessor internationalisiert
werden können. Damit dies realisiert werden kann, sind folgende
vordefinierte Begriffe festgelegt:</p>
<dl style="margin-left: 20px;">
<dd>
<table style="width: 512px; height: 234px;" border="1" bordercolor="#000000" cellpadding="4" cellspacing="0">
<col width="150"> <col width="159"> <col width="149"> <tbody>
<tr valign="top">
<td width="150">
Messwertbezeichnung
</td>
<td width="159">
Bezeichnung
Deutsch
</td>
<td width="149">
Bez. Englisch
</td>
</tr>
<tr valign="top">
<td width="150">
HGL
</td>
<td width="159">
Hauptgleis
</td>
<td width="149">
Maintrack
</td>
</tr>
<tr valign="top">
<td width="150">
PGL
</td>
<td width="159">
Programmiergleis
</td>
<td width="149">
Programtrack
</td>
</tr>
<tr valign="top">
<td width="150">
TRACK
</td>
<td width="159">
Boostergleis
</td>
<td width="149">
Boostertrack
</td>
</tr>
<tr valign="top">
<td width="150">
VOLT
</td>
<td width="159">
Versorgungsspannung
</td>
<td width="149">
Supplyvoltage
</td>
</tr>
<tr valign="top">
<td width="150">
ACHSEN
</td>
<td width="159">
Achsen
</td>
<td width="149">
Axes
</td>
</tr>
<tr valign="top">
<td width="150">
TEMP
</td>
<td width="159">
Temperatur
</td>
<td width="149">
Temperature
</td>
</tr>
<tr valign="top">
<td width="150">
TEMPO
</td>
<td width="159">
Geschwindigkeit
</td>
<td width="149">
Speed
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<br>
<p style="margin-left: 20px;">Ist
ein Begriff in dieser Tabelle nicht enthalten, so wird er dargestellt
wie
empfangen&nbsp;und nicht internationalisiert.</p>
<p><span style="font-weight: bold;">Bezeichnung
Start:</span> </p>
<p style="margin-left: 20px;">Format
einer Gleitkommazahl. Liefert sowohl die Information, für den
Startwert der Darstellung als auch eine Information, wie der Messwert
dargestellt werden soll. Die Anzahl der Nachkommastellen sind auch
die Anzahl der Nachkommastellen des Messwerts (mA also 3
Nachkommastellen). Abgefragter Messwert muss bei der Darstellung
durch 1000 geteilt werden. Die Anzahl der Nachkommastellen und die
Potenz des Messwerts müssen identisch sein.</p>
<p style="font-weight: bold;">Bezeichnung
Ende:</p>
<p style="margin-left: 20px;">Format
und Funktion wie Bezeichnung Start. Für das Ende der Darstellung.</p>
<p><span style="font-weight: bold;">Einheit:</span>
</p>
<p style="margin-left: 20px;">Liefert
für die Darstellung des Messwertes die entsprechende Einheit.</p>
<br>
<table summary="" border="1" cellpadding="3" cellspacing="0" width="100%">
<tbody>
<tr class="TableHeadingColor" bgcolor="#ccccff">
<th colspan="1" align="left"><font size="+2">
Beispiel</font></th>
</tr>
</tbody>
</table>
<br>
<p></p>
<br>
<table summary="" border="1" cellpadding="3" cellspacing="0" width="100%">
<tbody>
<tr class="TableHeadingColor" bgcolor="#ccccff">
<th colspan="1" align="left"><font size="+2">
Antwort</font></th>
</tr>
</tbody>
</table>
<br>
<p>Datenstrom gemäs obiger Beschreibung</p>
<br>
<table summary="" border="1" cellpadding="3" cellspacing="0" width="100%">
<tbody>
<tr class="TableHeadingColor" bgcolor="#ccccff">
<th colspan="1" align="left"><font size="+2">
Besonderheiten</font></th>
</tr>
</tbody>
</table>
<br>
<p>Wird immer von Graphical User Interface Prozessor ausgelöst.</p>
<p>Kanalnummer und Kanalindex müssen nicht übereinstimmen.</p>
<p>Kanalnummer wird als Kennung bei Überlastmeldung verwendet.</p>
<p>
Bei diesem Kommando handelt es sich um ein sequenziell in der
Abarbeitung befindlichen Programmierbefehl. Diese werden nicht in einer
Befehlqueue zwischengespeichert. Erst nach einer Antwort durch den
Gleis Format Prozessor darf der nächste Programmierbefehl angefordert
werden. Genau ein Programmierbefehl wird durch den Gleis Format
Prozessor zeitgleich abgearbeitet.</p>
<br>
<hr><br>
<table style="width: 100%;" summary="" border="0" cellpadding="1" cellspacing="0">
<tbody>
<tr>
<td colspan="2" class="NavBarCell1" bgcolor="#eeeeff">
<table summary="" border="0" cellpadding="0" cellspacing="3">
<tbody>
<tr align="center" valign="top">
<td class="NavBarCell1" bgcolor="#eeeeff">
<a href="../../overview-summary.html"><font class="NavBarFont1"><b>Überblick</b></font></a>&nbsp;</td>
<td class="NavBarCell1" bgcolor="#eeeeff">
<a href="package-summary.html"><font class="NavBarFont1"><b>Kapitel</b></font></a>&nbsp;</td>
<td class="NavBarCell1" bgcolor="#eeeeff">
<a href="../../help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr>
<td style="background-color: white; text-align: right;" class="NavBarCell2"><font size="-2"> <a href="../../index.html" target="_top"><b>FRAMES</b></a>
&nbsp;
&nbsp;<a href="6_Statusdata.html" target="_top"><b>NO
FRAMES</b></a> &nbsp;
&nbsp;
<script type="text/javascript">
<!--
if(window==top) {
document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
}
//-->
</script>
<noscript> <A
HREF="../../allclasses-noframe.html"><B>All
Classes</B></A>
</noscript>
</font></td>
</tr>
</tbody>
</table>
<br>
<hr>
</body></html>